<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>docker学习 | Echin の 博客</title><meta name="author" content="Echin-h"><meta name="copyright" content="Echin-h"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="引言#Docker is an open platform for developing, shipping, and running applications. Docker allows you to separate your applications from your infrastructure so you can deliver software quickly. With Doc">
<meta property="og:type" content="article">
<meta property="og:title" content="docker学习">
<meta property="og:url" content="http://example.com/2024/08/02/docker%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Echin の 博客">
<meta property="og:description" content="引言#Docker is an open platform for developing, shipping, and running applications. Docker allows you to separate your applications from your infrastructure so you can deliver software quickly. With Doc">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg">
<meta property="article:published_time" content="2024-08-02T07:45:56.000Z">
<meta property="article:modified_time" content="2024-08-02T08:28:46.782Z">
<meta property="article:author" content="Echin-h">
<meta property="article:tag" content="docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg"><link rel="shortcut icon" href="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg"><link rel="canonical" href="http://example.com/2024/08/02/docker%E5%AD%A6%E4%B9%A0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"TQQRJ72W3Y","apiKey":"691b279e3e99ecf664b63c47582168b7","indexName":"hexo","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Echin-h","link":"链接: ","source":"来源: Echin の 博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'docker学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-02 16:28:46'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">175</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">45</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">44</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/todo/"><i class="fa-fw fas fa-list-alt"></i><span> ToDo</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Echin の 博客"><span class="site-name">Echin の 博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/todo/"><i class="fa-fw fas fa-list-alt"></i><span> ToDo</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">docker学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-02T07:45:56.000Z" title="发表于 2024-08-02 15:45:56">2024-08-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-02T08:28:46.782Z" title="更新于 2024-08-02 16:28:46">2024-08-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/docker/">docker</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="docker学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2><span id="引言">引言</span><a href="#引言" class="header-anchor">#</a></h2><p><strong><a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></strong> is an open platform for developing, shipping, and running applications.</p>
<p>Docker allows you to separate your applications from your infrastructure so you can deliver software quickly. With Docker, you can manage your infrastructure in the same ways you manage your applications.</p>
<h2><span id="docker-架构">Docker 架构</span><a href="#docker-架构" class="header-anchor">#</a></h2><ul>
<li><strong>Docker Client</strong></li>
<li><strong>Docker Daemon</strong><ul>
<li><strong>Docker Server</strong></li>
<li><strong>Engine</strong></li>
</ul>
</li>
<li><strong>Docker Registry</strong></li>
</ul>
<p><img src="C:/Users/%E4%BD%95%E4%B8%80%E5%B7%9D/AppData/Roaming/Typora/typora-user-images/image-20240723142644532.png" alt="image-20240723142644532"></p>
<h2><span id="docker-安装">Docker 安装</span><a href="#docker-安装" class="header-anchor">#</a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install -y apt-transport-https ca-certificates curl software-properties-common</span><br><span class="line"></span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">sudo add-apt-repository <span class="string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu <span class="subst">$(lsb_release -cs)</span> stable&quot;</span></span><br><span class="line"></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install -y docker-ce</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           26.1.3</span><br><span class="line"> API version:       1.45</span><br><span class="line"> Go version:        go1.21.10</span><br><span class="line"> Git commit:        b72abbb</span><br><span class="line"> Built:             Thu May 16 08:33:35 2024</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          26.1.3</span><br><span class="line">  API version:      1.45 (minimum version 1.24)</span><br><span class="line">  Go version:       go1.21.10</span><br><span class="line">  Git commit:       8e96db1</span><br><span class="line">  Built:            Thu May 16 08:33:35 2024</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.6.32</span><br><span class="line">  GitCommit:        8b3b7ca2e5ce38e8f31a34f35b2b68ceb8470d89</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.1.12</span><br><span class="line">  GitCommit:        v1.1.12-0-g51d5e94</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:        de40ad0</span><br></pre></td></tr></table></figure>

<h2><span id="docker-代理">Docker 代理</span><a href="#docker-代理" class="header-anchor">#</a></h2><p>要拉取镜像，使用阿里云的代理，或者直接开启魔法</p>
<p><img src="C:/Users/%E4%BD%95%E4%B8%80%E5%B7%9D/AppData/Roaming/Typora/typora-user-images/image-20240723145358155.png" alt="image-20240723145358155"></p>
<h2><span id="镜像">镜像</span><a href="#镜像" class="header-anchor">#</a></h2><p>镜像 就是 模板</p>
<ul>
<li><strong>查找可以拉取的镜像</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker search nginx</span></span><br><span class="line">NAME                               DESCRIPTION                                     STARS     OFFICIAL</span><br><span class="line">nginx                              Official build of Nginx.                        20031     [OK]</span><br><span class="line">unit                               Official build of NGINX Unit: Universal Web …   33        [OK]</span><br><span class="line">nginx/nginx-ingress                NGINX and  NGINX Plus Ingress Controllers fo…   92        </span><br><span class="line">nginxinc/nginx-unprivileged        Unprivileged NGINX Dockerfiles                  155       </span><br><span class="line">// .....</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>查找本地镜像</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>拉取镜像</strong></li>
</ul>
<p>每一行就是每一层包装</p>
<p>所以有些时候，拉取一个镜像，有许多层是不需要重复下载的</p>
<p>镜像是由一系列的层组成的。每个层代表Dockerfile中的一个指令，这些层堆叠在一起形成了完整的镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker pull imageName </span><br><span class="line"></span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker pull openjdk:11</span></span><br><span class="line">11: Pulling from library/openjdk</span><br><span class="line">0e29546d541c: Pull complete </span><br><span class="line">9b829c73b52b: Pull complete </span><br><span class="line">cb5b7ae36172: Pull complete </span><br><span class="line">6494e4811622: Pull complete </span><br><span class="line">668f6fcc5fa5: Pull complete </span><br><span class="line">dc120c3e0290: Pull complete </span><br><span class="line">8f7c0eebb7b1: Pull complete </span><br></pre></td></tr></table></figure>

<ul>
<li>删除镜像</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi imageID</span><br></pre></td></tr></table></figure>

<p><code>rm</code> 删除  <code>i</code> 镜像</p>
<h2><span id="容器">容器</span><a href="#容器" class="header-anchor">#</a></h2><p><code>ID</code> 与 <code>name</code> 都是唯一的，所以可以用ID的地方也可以用 <code>name</code></p>
<ul>
<li><strong>容器创建</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run nginx</span><br></pre></td></tr></table></figure>

<p>这样子创建的容器有几个缺点：</p>
<ol>
<li>每次都是创建新的容器</li>
<li>前台运行 –&gt; 命令行被占用，无法使用；把命令行关闭就会关闭进程</li>
<li><code>curl 127.0.0.1</code> 无法访问 ，因为开启的是容器的内网，需要做端口映射</li>
</ol>
<p>如果要实现端口映射：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 nginx </span><br></pre></td></tr></table></figure>

<p><code>-d</code> 是代表后台运行</p>
<p><code>-p 80:80</code> 是指定端口映射 - 容器端口 ：容器端口</p>
<p><code>-P</code> 是随机端口映射</p>
<ul>
<li><strong>容器查看</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker ps  <span class="comment"># 只查看运行的</span></span><br><span class="line"></span><br><span class="line">docker ps -a <span class="comment"># 查看所有的容器</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>删除停止运行的容器</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm id/name</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>删除正在运行的容器</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> -f <span class="built_in">id</span>/name  <span class="comment"># 强制删除</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>容器停止</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop <span class="built_in">id</span>/name</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>容器启动</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start id/name</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>进入容器内部</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it nginx01 /bin/bash</span><br><span class="line"></span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker exec -it nginx01 /bin/bash</span></span><br><span class="line">root@9d96ec7a3c6c:/<span class="comment">#   #我们的用户名直接变了，因为进入了容器内部</span></span><br><span class="line"></span><br><span class="line">root@9d96ec7a3c6c:/<span class="comment"># ls </span></span><br><span class="line">bin   dev                  docker-entrypoint.sh  home  lib64  mnt  proc  run   srv  tmp  var</span><br><span class="line">boot  docker-entrypoint.d  etc                   lib   media  opt  root  sbin  sys  usr</span><br></pre></td></tr></table></figure>

<p><code>exec</code> 就是 执行命令的意思</p>
<p><code>-i</code> 是交互式的意思</p>
<p><code>-t</code> 是伪终端的意思</p>
<p><code>/bin/bash</code> 是可用的终端</p>
<p>整体的意思：在<code>nginx01</code>里使用<code>/bin/bash</code>下的脚本开启一个交互式伪终端，也就是进入容器内部</p>
<ul>
<li><strong>相关配置</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--name name  # 取名字</span><br><span class="line"></span><br><span class="line">--rm   # 退出时自动删除</span><br><span class="line"></span><br><span class="line">--restart no/on-failure:3/always      # 重启策略   不重启/失败重启3次/开机自启</span><br><span class="line"></span><br><span class="line">-e key=value,key=value  # 设置环境变量</span><br><span class="line">docker inspect nginx01  # 查看环境变量</span><br><span class="line"></span><br><span class="line">-m 2m						# 限制容器资源 -- 2m内存</span><br><span class="line">-cups 0.5					# 限制cpu资源</span><br></pre></td></tr></table></figure>

<h2><span id="日志">日志</span><a href="#日志" class="header-anchor">#</a></h2><ul>
<li><strong>容器日志</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs nginx01</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>日志的其他功能</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">docker logs --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker logs --help</span></span><br><span class="line"></span><br><span class="line">Usage:  docker logs [OPTIONS] CONTAINER</span><br><span class="line"></span><br><span class="line">Fetch the logs of a container</span><br><span class="line"></span><br><span class="line">Aliases:</span><br><span class="line">  docker container logs, docker logs</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --details        Show extra details provided to logs</span><br><span class="line">  -f, --follow         Follow <span class="built_in">log</span> output</span><br><span class="line">      --since string   Show logs since timestamp (e.g. <span class="string">&quot;2013-01-02T13:23:37Z&quot;</span>) or relative (e.g.</span><br><span class="line">                       <span class="string">&quot;42m&quot;</span> <span class="keyword">for</span> 42 minutes)</span><br><span class="line">  -n, --<span class="built_in">tail</span> string    Number of lines to show from the end of the logs (default <span class="string">&quot;all&quot;</span>)</span><br><span class="line">  -t, --timestamps     Show timestamps</span><br><span class="line">      --<span class="keyword">until</span> string   Show logs before a timestamp (e.g. <span class="string">&quot;2013-01-02T13:23:37Z&quot;</span>) or relative</span><br><span class="line">                       (e.g. <span class="string">&quot;42m&quot;</span> <span class="keyword">for</span> 42 minutes)</span><br></pre></td></tr></table></figure>

<p><code>-f</code> 实时监听</p>
<p><code>-n</code> 查看最近n条</p>
<h2><span id="volume">Volume</span><a href="#volume" class="header-anchor">#</a></h2><ul>
<li><strong>隔离性</strong></li>
</ul>
<p>本质上容器中的文件系统也是存在于主机的文件系统上，但隔离</p>
<p>容器的文件系统占用的磁盘大小 是单独分割出一块区域 供其使用，正常主机文件操作不会涉及容器区域</p>
<p>volume 的作用： 让容器内的文件系统和容器外的文件系统 <strong>部分共享</strong>；也就是允许 容器可以访问到 <strong>容器外的某一个目录</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume --help</span><br></pre></td></tr></table></figure>

<h3><span id="数据卷管理命令">数据卷管理命令</span><a href="#数据卷管理命令" class="header-anchor">#</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:/<span class="comment"># docker volume</span></span><br><span class="line"></span><br><span class="line">Usage:  docker volume COMMAND</span><br><span class="line"></span><br><span class="line">Manage volumes</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  create      Create a volume        </span><br><span class="line">  inspect     Display detailed information on one or more volumes  </span><br><span class="line">  <span class="built_in">ls</span>          List volumes       </span><br><span class="line">  prune       Remove unused <span class="built_in">local</span> volumes   </span><br><span class="line">  <span class="built_in">rm</span>          Remove one or more volumes   </span><br><span class="line"></span><br><span class="line">Run <span class="string">&#x27;docker volume COMMAND --help&#x27;</span> <span class="keyword">for</span> more information on a <span class="built_in">command</span>.</span><br></pre></td></tr></table></figure>

<h3><span id="三种绑定方式">三种绑定方式</span><a href="#三种绑定方式" class="header-anchor">#</a></h3><ul>
<li><strong>匿名绑定（用的少）</strong></li>
</ul>
<ol>
<li><p>匿名绑定的 volumn 在容器被删除的时候，数据卷会被删除</p>
</li>
<li><p>Docker 会自动为容器分配一个随机名称的卷来存储数据</p>
</li>
</ol>
<p><strong>创建容器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker run --rm -d -p 80:80 --name nginx_volume -v /usr/share/nginx/html nginx </span><br><span class="line">990e5a0389e6f87b6a13d4161fa0d01f7b97323c246f9aa2c12afa439979ba16</span><br></pre></td></tr></table></figure>

<p><code>--rm</code>  使用完后自动删除</p>
<p><code>-d</code>  后台运行</p>
<p><code>-p</code>  端口映射</p>
<p><code>--name</code>  容器名字</p>
<p><code>-v /usr/share/nginx/html</code> 使用数据卷，这里后面的路径表示的是要挂载的容器内的数据所在目录</p>
<p><code>nginx</code>  镜像名字</p>
<p><strong>看一下容器时候创建成功</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                     NAMES</span><br><span class="line">990e5a0389e6   nginx     &quot;/docker-entrypoint.…&quot;   2 minutes ago   Up 2 minutes   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp         nginx_volume</span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# curl localhost:80</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: 35em; margin: 0 auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>如果要查看创建的docker容器映射的容器外部数据卷目录所在路径</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker inspect nginx_volume</span><br><span class="line">[</span><br><span class="line">    // ................</span><br><span class="line">        &quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;volume&quot;,</span><br><span class="line">                &quot;Name&quot;: &quot;68d5763087ed18658eb1327e987101aeb45bc3e2f674b0657cee877d416a12ef&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;/var/lib/docker/volumes/68d5763087ed18658eb1327e987101aeb45bc3e2f674b0657cee877d416a12ef/_data&quot;,</span><br><span class="line">                &quot;Destination&quot;: &quot;/usr/share/nginx/html&quot;,</span><br><span class="line">                &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">                &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    // ..................    </span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><code>destination</code>  容器内部的目录</p>
<p><code>source</code> 容器外部的目录</p>
<p><strong>查看外部是否有这个目录</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# cd /var/lib/docker/volumes/68d5763087ed18658eb1327e987101aeb45bc3e2f674b0657cee877d416a12ef/_data</span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:/var/lib/docker/volumes/68d5763087ed18658eb1327e987101aeb45bc3e2f674b0657cee877d416a12ef/_data# ls</span><br><span class="line">50x.html  index.html</span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:/var/lib/docker/volumes/68d5763087ed18658eb1327e987101aeb45bc3e2f674b0657cee877d416a12ef/_data# </span><br></pre></td></tr></table></figure>

<p>由此可知，关联是存在的</p>
<p>现在修改一下外部的 index.html</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim index.html</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"><span class="symbol">&lt;html&gt;</span></span><br><span class="line"><span class="symbol">&lt;head&gt;</span></span><br><span class="line"><span class="symbol">&lt;title&gt;</span>after my fixfixfix!&lt;/title&gt;</span><br><span class="line"><span class="symbol">&lt;style&gt;</span></span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: <span class="number">35</span><span class="keyword">em</span>; margin: <span class="number">0</span> auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"><span class="symbol">&lt;body&gt;</span></span><br><span class="line"><span class="symbol">&lt;h1&gt;</span>Welcome <span class="keyword">to</span> nginx!&lt;/h1&gt;</span><br><span class="line"><span class="symbol">&lt;p&gt;</span>If you see this page, the nginx web server <span class="keyword">is</span> successfully installed <span class="built_in">and</span></span><br><span class="line">working. Further configuration <span class="keyword">is</span> required.&lt;/<span class="keyword">p</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="symbol">&lt;p&gt;</span>For online documentation <span class="built_in">and</span> support please refer <span class="keyword">to</span></span><br><span class="line">&lt;<span class="keyword">a</span> href=<span class="string">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/<span class="keyword">a</span>&gt;.&lt;<span class="keyword">br</span>/&gt;</span><br><span class="line">Commercial support <span class="keyword">is</span> available at</span><br><span class="line">&lt;<span class="keyword">a</span> href=<span class="string">&quot;http://nginx.com/&quot;</span>&gt;nginx.<span class="keyword">com</span>&lt;/<span class="keyword">a</span>&gt;.&lt;/<span class="keyword">p</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="symbol">&lt;p&gt;</span><span class="symbol">&lt;em&gt;</span>Thank you <span class="keyword">for</span> using nginx.&lt;/<span class="keyword">em</span>&gt;&lt;/<span class="keyword">p</span>&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@<span class="number">990</span>e5a0389e6:/usr/share/nginx/html# curl localhos<span class="variable">t:80</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"><span class="symbol">&lt;html&gt;</span></span><br><span class="line"><span class="symbol">&lt;head&gt;</span></span><br><span class="line"><span class="symbol">&lt;title&gt;</span>after my fixfixfix!&lt;/title&gt;</span><br><span class="line"><span class="symbol">&lt;style&gt;</span></span><br><span class="line">html &#123; color-scheme: light dark; &#125;</span><br><span class="line">body &#123; width: <span class="number">35</span><span class="keyword">em</span>; margin: <span class="number">0</span> auto;</span><br><span class="line">font-family: Tahoma, Verdana, Arial, sans-serif; &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"><span class="symbol">&lt;body&gt;</span></span><br><span class="line"><span class="symbol">&lt;h1&gt;</span>Welcome <span class="keyword">to</span> nginx!&lt;/h1&gt;</span><br><span class="line"><span class="symbol">&lt;p&gt;</span>If you see this page, the nginx web server <span class="keyword">is</span> successfully installed <span class="built_in">and</span></span><br><span class="line">working. Further configuration <span class="keyword">is</span> required.&lt;/<span class="keyword">p</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="symbol">&lt;p&gt;</span>For online documentation <span class="built_in">and</span> support please refer <span class="keyword">to</span></span><br><span class="line">&lt;<span class="keyword">a</span> href=<span class="string">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/<span class="keyword">a</span>&gt;.&lt;<span class="keyword">br</span>/&gt;</span><br><span class="line">Commercial support <span class="keyword">is</span> available at</span><br><span class="line">&lt;<span class="keyword">a</span> href=<span class="string">&quot;http://nginx.com/&quot;</span>&gt;nginx.<span class="keyword">com</span>&lt;/<span class="keyword">a</span>&gt;.&lt;/<span class="keyword">p</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="symbol">&lt;p&gt;</span><span class="symbol">&lt;em&gt;</span>Thank you <span class="keyword">for</span> using nginx.&lt;/<span class="keyword">em</span>&gt;&lt;/<span class="keyword">p</span>&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>然后我们修改有一下  容器内的 文件</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;hello docker&#x27;</span> &gt; index.html</span><br></pre></td></tr></table></figure>

<p><strong>然后转到 容器外的文件目录上</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> index.html</span><br><span class="line"></span><br><span class="line">hello docker</span><br></pre></td></tr></table></figure>

<p><strong>因此我们发现，容器内和容器外是相互关联的，无论是我们修改容器内的文件还是修改容器外的文件</strong></p>
<p><strong>验证一下容器删除后数据卷也删除</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker volume ls</span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line">local     2a5808e089d3e17977f9586770d1489dcaf79473a4c37ae1dc4c863a6c4a59f8</span><br><span class="line">local     4ed2880b063c5c7dd3057088a4e614cf7fb9c071692a8b0a193d9c4c01b57f56</span><br><span class="line">local     6ace849e5a1ceea672b6b771f80cb484c17f7dd69456ff4b277d69981587a75a</span><br><span class="line">local     40ab82e68b995b09b5342021bc6a34378e9b54bed1d352402fe8df729eae174d</span><br><span class="line">local     68d5763087ed18658eb1327e987101aeb45bc3e2f674b0657cee877d416a12ef</span><br><span class="line">local     88e667aa68a83da1322e525e528cefbf4cce342d9caec1e4f7359b607349b102</span><br><span class="line">local     6320e3d5a1e2cba18f6d04ef7ac45af7abe8f5e15658d236afea8c1d30d0038b</span><br><span class="line">local     56555ab23611f1a946d1cb08e922f9b82af59cc36b459ac321620ec2a43a5ed2</span><br><span class="line">local     a9f4299d0bb46ccf9bc7210bcba921f3ccf2db94a0b5e580df6d5b1ec9728498</span><br><span class="line">local     c24965087c46f93d55ff6d3d41530ced7268706777b998b00ca5085bae253c6c</span><br><span class="line">local     e20e5fcebfc72118c1352b0fc0fdc0e31e3e2985b46f682d1fad04bba9115bc1</span><br><span class="line">local     fa5dc80a62250e91edd5a8e205ca6311ce79f022a8f12f35da7d7563a5bc48fd</span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker stop nginx_volume</span><br><span class="line">nginx_volume</span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE         COMMAND                  CREATED      STATUS                  PORTS                                     NAMES</span><br><span class="line">9d96ec7a3c6c   nginx         &quot;/docker-entrypoint.…&quot;   9 days ago   Up 9 days               0.0.0.0:32770-&gt;80/tcp, :::32770-&gt;80/tcp   nginx01</span><br><span class="line">525d3cea0513   nginx         &quot;/docker-entrypoint.…&quot;   9 days ago   Exited (0) 9 days ago                                             eager_shirley</span><br><span class="line">e5bdc6b3cab8   nginx         &quot;/docker-entrypoint.…&quot;   9 days ago   Exited (0) 9 days ago                                             jovial_hawking</span><br><span class="line">8b274132b674   hello-world   &quot;/hello&quot;                 9 days ago   Exited (0) 9 days ago                                             admiring_blackburn</span><br><span class="line">387c58f4b704   hello-world   &quot;/hello&quot;                 9 days ago   Exited (0) 9 days ago                                             silly_moore</span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker volume ls</span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line">local     2a5808e089d3e17977f9586770d1489dcaf79473a4c37ae1dc4c863a6c4a59f8</span><br><span class="line">local     4ed2880b063c5c7dd3057088a4e614cf7fb9c071692a8b0a193d9c4c01b57f56</span><br><span class="line">local     6ace849e5a1ceea672b6b771f80cb484c17f7dd69456ff4b277d69981587a75a</span><br><span class="line">local     40ab82e68b995b09b5342021bc6a34378e9b54bed1d352402fe8df729eae174d</span><br><span class="line">local     88e667aa68a83da1322e525e528cefbf4cce342d9caec1e4f7359b607349b102</span><br><span class="line">local     6320e3d5a1e2cba18f6d04ef7ac45af7abe8f5e15658d236afea8c1d30d0038b</span><br><span class="line">local     56555ab23611f1a946d1cb08e922f9b82af59cc36b459ac321620ec2a43a5ed2</span><br><span class="line">local     a9f4299d0bb46ccf9bc7210bcba921f3ccf2db94a0b5e580df6d5b1ec9728498</span><br><span class="line">local     c24965087c46f93d55ff6d3d41530ced7268706777b998b00ca5085bae253c6c</span><br><span class="line">local     e20e5fcebfc72118c1352b0fc0fdc0e31e3e2985b46f682d1fad04bba9115bc1</span><br><span class="line">local     fa5dc80a62250e91edd5a8e205ca6311ce79f022a8f12f35da7d7563a5bc48fd</span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# </span><br></pre></td></tr></table></figure>

<p>可以发现，我们停掉容器，删除容器后，数据卷也就消失了</p>
<ul>
<li><strong>具名绑定</strong></li>
</ul>
<p>可以给数据卷起个名字，容器删除后数据卷不变，然后和匿名绑定差不多了</p>
<p><strong>创建容器</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker run --rm -d -p 80:80 --name nginx_volume -v nginx-html:/usr/share/nginx/html nginx </span></span><br><span class="line">c2c2a0a156e93a604fbdad106898ac9e70fa7588353f1513221096e3600b8926</span><br></pre></td></tr></table></figure>

<p><code>-v nginx-html:/usr/share/nginx/html</code></p>
<p>在这里 <code>nginx-html</code> 就是数据卷的名字</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker volume ls</span></span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line"><span class="built_in">local</span>     2a5808e089d3e17977f9586770d1489dcaf79473a4c37ae1dc4c863a6c4a59f8</span><br><span class="line"><span class="built_in">local</span>     4ed2880b063c5c7dd3057088a4e614cf7fb9c071692a8b0a193d9c4c01b57f56</span><br><span class="line"><span class="built_in">local</span>     6ace849e5a1ceea672b6b771f80cb484c17f7dd69456ff4b277d69981587a75a</span><br><span class="line"><span class="built_in">local</span>     40ab82e68b995b09b5342021bc6a34378e9b54bed1d352402fe8df729eae174d</span><br><span class="line"><span class="built_in">local</span>     88e667aa68a83da1322e525e528cefbf4cce342d9caec1e4f7359b607349b102</span><br><span class="line"><span class="built_in">local</span>     6320e3d5a1e2cba18f6d04ef7ac45af7abe8f5e15658d236afea8c1d30d0038b</span><br><span class="line"><span class="built_in">local</span>     56555ab23611f1a946d1cb08e922f9b82af59cc36b459ac321620ec2a43a5ed2</span><br><span class="line"><span class="built_in">local</span>     a9f4299d0bb46ccf9bc7210bcba921f3ccf2db94a0b5e580df6d5b1ec9728498</span><br><span class="line"><span class="built_in">local</span>     c24965087c46f93d55ff6d3d41530ced7268706777b998b00ca5085bae253c6c</span><br><span class="line"><span class="built_in">local</span>     e20e5fcebfc72118c1352b0fc0fdc0e31e3e2985b46f682d1fad04bba9115bc1</span><br><span class="line"><span class="built_in">local</span>     fa5dc80a62250e91edd5a8e205ca6311ce79f022a8f12f35da7d7563a5bc48fd</span><br><span class="line"><span class="built_in">local</span>     nginx-html</span><br></pre></td></tr></table></figure>

<p><strong>查看一下这个数据卷的位置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker inspect nginx_volume </span><br><span class="line">&quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;volume&quot;,</span><br><span class="line">                &quot;Name&quot;: &quot;nginx-html&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;/var/lib/docker/volumes/nginx-html/_data&quot;,</span><br><span class="line">                &quot;Destination&quot;: &quot;/usr/share/nginx/html&quot;,</span><br><span class="line">                &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">                &quot;Mode&quot;: &quot;z&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure>

<p><strong>验证容器删除后数据卷不删除</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker rm -f nginx_volume </span><br><span class="line">nginx_volume</span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~# docker volume ls</span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line">local     2a5808e089d3e17977f9586770d1489dcaf79473a4c37ae1dc4c863a6c4a59f8</span><br><span class="line">local     4ed2880b063c5c7dd3057088a4e614cf7fb9c071692a8b0a193d9c4c01b57f56</span><br><span class="line">local     6ace849e5a1ceea672b6b771f80cb484c17f7dd69456ff4b277d69981587a75a</span><br><span class="line">local     40ab82e68b995b09b5342021bc6a34378e9b54bed1d352402fe8df729eae174d</span><br><span class="line">local     88e667aa68a83da1322e525e528cefbf4cce342d9caec1e4f7359b607349b102</span><br><span class="line">local     6320e3d5a1e2cba18f6d04ef7ac45af7abe8f5e15658d236afea8c1d30d0038b</span><br><span class="line">local     56555ab23611f1a946d1cb08e922f9b82af59cc36b459ac321620ec2a43a5ed2</span><br><span class="line">local     a9f4299d0bb46ccf9bc7210bcba921f3ccf2db94a0b5e580df6d5b1ec9728498</span><br><span class="line">local     c24965087c46f93d55ff6d3d41530ced7268706777b998b00ca5085bae253c6c</span><br><span class="line">local     e20e5fcebfc72118c1352b0fc0fdc0e31e3e2985b46f682d1fad04bba9115bc1</span><br><span class="line">local     fa5dc80a62250e91edd5a8e205ca6311ce79f022a8f12f35da7d7563a5bc48fd</span><br><span class="line">local     nginx-html</span><br></pre></td></tr></table></figure>

<p>可以看出，具名绑定中删除了容器，但是数据卷并没有被删除</p>
<p><strong>真的想要删除数据卷</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume <span class="built_in">rm</span> -f nginx_volume </span><br></pre></td></tr></table></figure>

<p><strong>缺点</strong>：</p>
<p>这个并不能自由指定某个目录和容器内的目录进行关联</p>
<p>只能够决定这个数据卷的名字而已</p>
<p>具体路径还是随机生成的</p>
<ul>
<li><strong>Bind Mount</strong></li>
</ul>
<p>绑定并加载主机的某个文件目录到容器中</p>
<p>这个是最重要最平常的一种方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:/# docker run --rm -d -p 80:80 --name nginx_volume -v /www/nginx:/usr/share/nginx/html nginx </span><br><span class="line">53433f7ad6a95fd955353410cf88819d457d51bca8d495a4600fc8b83f39c061</span><br></pre></td></tr></table></figure>

<p><code>-v /www/nginx:/usr/share/nginx/html</code> 前面是主机目录，后面是容器目录</p>
<p>多目录绑定： <code>-v  xxx:xxx -v xxxx:xxxx</code></p>
<p>但是这种方式下并不会在 <code>docker volume ls</code> 下呈现出 数据卷</p>
<h2><span id="network">NetWork</span><a href="#network" class="header-anchor">#</a></h2><p>是 docker 对容器网络隔离的 技术，提供了不同的模式供开发者使用，来实现容器网络的互通以及彻底的隔离</p>
<ol>
<li>容器间的网络隔离</li>
<li>部分容器之间的网络隔离</li>
<li>管理多个子网下容器的ip</li>
</ol>
<blockquote>
<p><strong>网卡</strong>（也称网络适配器或网络接口卡）是计算机和网络连接的硬件组件。其主要功能是将计算机的数据转换为网络信号，并将网络信号转换为计算机可以理解的数据。</p>
<p><strong>虚拟网卡</strong>是软件模拟的网卡，它在功能上与物理网卡相同，但其实现完全基于软件。虚拟网卡通常用于虚拟机、容器和其他虚拟化环境，以便这些虚拟化实例能够像物理机一样进行网络通信。</p>
<p><strong>bridge 网桥</strong>是一种虚拟网络设备，它连接了 Docker 容器和宿主机的网络。它允许容器之间以及容器与外部网络之间进行通信。</p>
</blockquote>
<ul>
<li><strong>查看网络</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:/# ip addr</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host noprefixroute </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether 00:16:3e:1c:3b:52 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    altname enp0s5</span><br><span class="line">    altname ens5</span><br><span class="line">    inet 172.18.248.200/20 metric 100 brd 172.18.255.255 scope global dynamic eth0</span><br><span class="line">       valid_lft 315295039sec preferred_lft 315295039sec</span><br><span class="line">    inet6 fe80::216:3eff:fe1c:3b52/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    link/ether 02:42:81:e2:f0:cd brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:81ff:fee2:f0cd/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">4: flannel.1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UNKNOWN group default </span><br><span class="line">    link/ether 82:ee:82:59:60:f9 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 10.42.0.0/32 scope global flannel.1</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::80ee:82ff:fe59:60f9/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">20: veth51c06f5@if19: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default </span><br><span class="line">    link/ether 96:dd:92:0e:07:cf brd ff:ff:ff:ff:ff:ff link-netnsid 1</span><br><span class="line">    inet6 fe80::94dd:92ff:fe0e:7cf/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">26: veth54985ef@if25: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default </span><br><span class="line">    link/ether e2:8e:dd:fe:92:b5 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet6 fe80::e08e:ddff:fefe:92b5/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h3><span id="网络模式">网络模式</span><a href="#网络模式" class="header-anchor">#</a></h3><ul>
<li><p>bridge(桥接)</p>
<p>在主机中创建一个 Docker0 的虚拟网桥，来实现主机和容器内的网络互通，可以看作是一种虚拟的交换机</p>
<p>在 Docker0 创建一对虚拟网卡，一半在主机上veth，一半在容器内eth0</p>
<p><code>veth0</code> <code>docker0</code> <code>eth0</code> 两张网卡 和 一个网桥</p>
<p><code>ens160</code> 主机的网卡</p>
</li>
</ul>
<p><img src="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/image-20240802004910476.png" alt="image-20240802004910476"></p>
<ul>
<li><p>host</p>
<p>容器不再拥有自己的网络空间，直接与主机共享网络空间，基于该模式创建的容器对应的ip 就是与主机同一个子网</p>
<p>此时 容器就会跟主机一样暴露到外部环境，会不安全，因此用的少</p>
</li>
<li><p>none (lo 网卡)</p>
</li>
</ul>
<p>​	Docker 会拥有自己的网络空间，不与主机共享，在这个网络模式下的容器，不会被分配网卡，ip等路由	信息</p>
<p>​	也就是完全隔离，和外部信息隔绝，只有自己本地的 127.0.0.1</p>
<ul>
<li><p>container</p>
<p>容器间处于同一个网络中</p>
<p><img src="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/image-20240802005808765.png" alt="image-20240802005808765"></p>
</li>
<li><p>自定义（推荐）</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network COMMAND</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker network create --driver bridge --subnet 192.168.133.0/24 --gateway 192.168.133.1 wolfcode</span></span><br><span class="line">f34f3bd1c7aa84aa8c6262f0ecac14ad662bdab2667543be165111a8d9302133</span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker netwok ls</span></span><br><span class="line">docker: <span class="string">&#x27;netwok&#x27;</span> is not a docker <span class="built_in">command</span>.</span><br><span class="line">See <span class="string">&#x27;docker --help&#x27;</span></span><br><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker network ls</span></span><br><span class="line">NETWORK ID     NAME       DRIVER    SCOPE</span><br><span class="line">683cea28bac4   bridge     bridge    <span class="built_in">local</span></span><br><span class="line">a1d8fa2e9dbd   host       host      <span class="built_in">local</span></span><br><span class="line">84bfb52c9cce   none       null      <span class="built_in">local</span></span><br><span class="line">f34f3bd1c7aa   wolfcode   bridge    <span class="built_in">local</span></span><br></pre></td></tr></table></figure>

<p>具体做法用到了再说</p>
<ul>
<li>查看特定网络：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">root@iZbp19bvr4g3vqr24ft07rZ:~<span class="comment"># docker network  inspect  wolfcode </span></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;wolfcode&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Id&quot;</span>: <span class="string">&quot;f34f3bd1c7aa84aa8c6262f0ecac14ad662bdab2667543be165111a8d9302133&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Created&quot;</span>: <span class="string">&quot;2024-08-02T13:18:19.419330829+08:00&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Scope&quot;</span>: <span class="string">&quot;local&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;bridge&quot;</span>,</span><br><span class="line">        <span class="string">&quot;EnableIPv6&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;IPAM&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Options&quot;</span>: &#123;&#125;,</span><br><span class="line">            <span class="string">&quot;Config&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;Subnet&quot;</span>: <span class="string">&quot;192.168.133.0/24&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;Gateway&quot;</span>: <span class="string">&quot;192.168.133.1&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;Internal&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;Attachable&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;Ingress&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;ConfigFrom&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;Network&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;ConfigOnly&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;Containers&quot;</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">&quot;Options&quot;</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">&quot;Labels&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2><span id="dockerfile">Dockerfile</span><a href="#dockerfile" class="header-anchor">#</a></h2><p>Docker 为我们提供的一个用于自定义构建镜像的一个配置文件： 描述如何构建一个镜像</p>
<p>最后利用 Docker build 命令 指定 Dockerfile 文件，就可以按照配置构建镜像</p>
<ul>
<li><strong>Commit</strong></li>
<li><strong>Build</strong></li>
</ul>
<h3><span id="常用指令">常用指令</span><a href="#常用指令" class="header-anchor">#</a></h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 先指定当前镜像的基础镜像是什么</span></span><br><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.14</span>.<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 描述这个镜像的作者以及联系方式（可选）</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> echin&lt;<span class="number">197795131</span>@qq.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 设置镜像的标签信息（可选）</span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> version=<span class="string">&quot;1.0&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> description=<span class="string">&quot;This is the first dockerfile&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 环境变量,可以设置多个</span></span><br><span class="line"><span class="keyword">ENV</span> GOPROXY=https://goproxy.cn,direct</span><br><span class="line"><span class="keyword">ENV</span> GO111MODULE=on</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 在构建镜像时，需要执行的命令和脚本</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /go/src/app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 将主机中的指定文件拷贝到镜像中目标路径  ADD &lt;src&gt;... &lt;dest&gt;</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> . /go/src/app</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> [<span class="string">&quot;./config&quot;</span>, <span class="string">&quot;/go/src/app/config&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 指定工作目录,如果不存在会自动创建</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /go/src/app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 8. 镜像数据卷绑定，可以将主机的指定目录挂载到容器中</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> [<span class="string">&quot;/data&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 9. 容器对外暴露的端口，仅仅是容器内暴露的端口，而没有和主机端口进行关联</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 10. 容器启动时执行的命令</span></span><br><span class="line"><span class="comment"># CMD 和 ENTRYPOINT 选择一个，描述构建镜像完成后，启动容器时默认执行的脚本</span></span><br><span class="line"><span class="comment"># 两者区别： CMD 可以被 docker run 命令行参数替换，ENTRYPOINT 不会被替换</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;go&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;main.go&quot;</span>]</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;go&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;main.go&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h3><span id="拓展指令">拓展指令</span><a href="#拓展指令" class="header-anchor">#</a></h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 设置变量，在镜像中定义一个变量，可以在构建镜像时通过 --build-arg 参数传递</span></span><br><span class="line"><span class="keyword">ARG</span> app_env=production</span><br><span class="line"><span class="comment"># ARG golang_env</span></span><br><span class="line"><span class="comment"># FROM golang:$golang_env</span></span><br><span class="line"><span class="comment"># docker build --build-arg app_env=development -t myapp:dev .</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 设置容器的用户，可以是用户名或者 UID</span></span><br><span class="line"><span class="keyword">USER</span> root</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. ONBUILD 指令，当构建一个被继承的 Dockerfile 时运行命令</span></span><br><span class="line"><span class="keyword">ONBUILD</span> <span class="keyword">ADD</span><span class="language-bash"> . /go/src/app </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. STOPSIGNAL 指令，设置容器停止时的信号</span></span><br><span class="line"><span class="keyword">STOPSIGNAL</span> SIGTERM</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. HEALTHCHECK 指令，设置容器健康检查的命令</span></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> --interval=5m --<span class="built_in">timeout</span>=3s \</span></span><br><span class="line"><span class="language-bash">  CMD curl -f http://localhost/ || <span class="built_in">exit</span> 1</span></span><br></pre></td></tr></table></figure>

<h2><span id="registry">Registry</span><a href="#registry" class="header-anchor">#</a></h2><ul>
<li>实现快速交付，更方便在其他机器上下载镜像运行容器</li>
<li>可以存储公式内部是由镜像，避免暴露到外网</li>
<li>提升镜像下载速度</li>
</ul>
<ol>
<li><p><strong>登录到 Registry</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login [OPTIONS] [SERVER] [USERNAME]</span><br></pre></td></tr></table></figure>

<p>使用此命令登录到 Docker Registry，需要提供用户名和可选的服务器地址。</p>
</li>
<li><p><strong>登出 Registry</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logout [SERVER]</span><br></pre></td></tr></table></figure>

<p>登出当前登录的 Docker Registry。</p>
</li>
<li><p><strong>查看本地镜像</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>列出本地的 Docker 镜像。</p>
</li>
<li><p><strong>拉取镜像</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull [OPTIONS] NAME[:TAG|@DIGEST]</span><br></pre></td></tr></table></figure>

<p>从 Registry 拉取指定的镜像。</p>
</li>
<li><p><strong>推送镜像</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push [OPTIONS] NAME[:TAG]</span><br></pre></td></tr></table></figure>

<p>将本地的镜像推送到 Registry。</p>
</li>
<li><p><strong>标记镜像</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh</span><br><span class="line">docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]</span><br></pre></td></tr></table></figure>

<p>给镜像打上新的标签，通常用于准备推送到不同的 Registry。</p>
</li>
<li><p><strong>查看 Registry 中的镜像列表</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh</span><br><span class="line">curl -X GET https://[SERVER]/v2/_catalog</span><br></pre></td></tr></table></figure>

<p>使用 curl 命令来查看指定 Registry 中的镜像列表。</p>
</li>
</ol>
<h2><span id="docker-compose">Docker compose</span><a href="#docker-compose" class="header-anchor">#</a></h2><p>容器编排： 针对容器生命周期的管理 </p>
<ul>
<li>依赖管理，当一个容器必须在另一个容器余小宁我暗沉后，才能运行时就需要依赖管理</li>
<li>副本数控制，容器有时候需要集群编排，进行弹性收缩</li>
<li>配置共享</li>
</ul>
<blockquote>
<p> 自行搜索如何下载 docker compose</p>
</blockquote>
<h3><span id="配置文件">配置文件</span><a href="#配置文件" class="header-anchor">#</a></h3><ul>
<li><strong>services</strong></li>
<li><strong>network</strong></li>
<li><strong>volumes</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;2.1&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  nginx-demo:</span><br><span class="line">    image: nginx:latest</span><br><span class="line">    container_name: nginx-demo</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;8080:80&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - ./nginx.conf:/etc/nginx/nginx.conf</span><br><span class="line">    depends_on:</span><br><span class="line">      - echin-h</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  default:</span><br><span class="line">    external:</span><br><span class="line">      name: echin-h_default</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  nginx-demo:</span><br><span class="line">    driver: local</span><br></pre></td></tr></table></figure>

<h3><span id="docker-compose-命令">Docker Compose 命令：</span><a href="#docker-compose-命令" class="header-anchor">#</a></h3><ol>
<li><p><strong>启动服务</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure>

<p>这个命令会启动配置文件中定义的所有服务。</p>
</li>
<li><p><strong>启动服务并进入后台运行</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>加上 <code>-d</code> 参数可以让服务在后台运行。</p>
</li>
<li><p><strong>停止服务</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down</span><br></pre></td></tr></table></figure>

<p>这个命令会停止并移除所有由 <code>docker-compose.yml</code> 文件中定义的服务、网络、卷和镜像。</p>
</li>
<li><p><strong>查看服务状态</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose ps</span><br></pre></td></tr></table></figure>

<p>列出所有由 <code>docker-compose.yml</code> 文件中定义的服务的状态。</p>
</li>
<li><p><strong>查看服务的详细日志</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose logs -f</span><br></pre></td></tr></table></figure>

<p>加上 <code>-f</code> 参数可以跟随日志输出，实时查看日志更新。</p>
</li>
<li><p><strong>停止并移除容器、网络、卷和镜像</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down -v</span><br></pre></td></tr></table></figure>

<p>加上 <code>-v</code> 参数会移除由服务使用的卷。</p>
</li>
<li><p><strong>构建或重建服务</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose build</span><br></pre></td></tr></table></figure>

<p>根据 Dockerfile 构建或重建服务的镜像。</p>
</li>
<li><p><strong>拉取服务的更新镜像</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose pull</span><br></pre></td></tr></table></figure>

<p>拉取服务使用的镜像的最新版本。</p>
</li>
<li><p><strong>查看服务的配置信息</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose config</span><br></pre></td></tr></table></figure>

<p>查看 <code>docker-compose.yml</code> 文件的配置信息。</p>
</li>
</ol>
<h2><span id="总结">总结</span><a href="#总结" class="header-anchor">#</a></h2><p>大概过了一遍知识点，具体写起来估计又是一脸懵逼</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Echin-h</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/08/02/docker%E5%AD%A6%E4%B9%A0/">http://example.com/2024/08/02/docker%E5%AD%A6%E4%B9%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Echin の 博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/docker/">docker</a></div><div class="post_share"><div class="social-share" data-image="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/08/02/%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/" title="子网掩码"><img class="cover" src="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">子网掩码</div></div></a></div><div class="next-post pull-right"><a href="/2024/08/07/pprof/" title="pprof"><img class="cover" src="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">pprof</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/03/13/dockerfile%E5%B0%9D%E8%AF%95/" title="dockerfile尝试"><img class="cover" src="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-13</div><div class="title">dockerfile尝试</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E5%9F%83%E7%BD%97%E8%8A%92%E9%98%BF%E8%80%81%E5%B8%88.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Echin-h</div><div class="author-info__description">keep learning</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">175</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">45</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">44</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Echin-h" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://mail.qq.com/cgi-bin/frame_html?sid=vYYzrbDEaqDZEhl8&amp;r=0505616c4ef48760cb44f616432dfbd8&amp;lang=zh" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">love is accumulated, not love, too.</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">Docker 架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">Docker 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">Docker 代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">7.</span> <span class="toc-text">日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">8.</span> <span class="toc-text">Volume</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">8.1.</span> <span class="toc-text">数据卷管理命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">8.2.</span> <span class="toc-text">三种绑定方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">9.</span> <span class="toc-text">NetWork</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">9.1.</span> <span class="toc-text">网络模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">10.</span> <span class="toc-text">Dockerfile</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">10.1.</span> <span class="toc-text">常用指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">10.2.</span> <span class="toc-text">拓展指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">11.</span> <span class="toc-text">Registry</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">12.</span> <span class="toc-text">Docker compose</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">12.1.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">12.2.</span> <span class="toc-text">Docker Compose 命令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">13.</span> <span class="toc-text">总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/08/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/" title="操作系统概论">操作系统概论</a><time datetime="2024-12-08T14:23:21.000Z" title="发表于 2024-12-08 22:23:21">2024-12-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/05/%E7%89%88%E6%9C%AC%E5%9B%9E%E9%80%80/" title="版本回退">版本回退</a><time datetime="2024-12-05T15:13:48.000Z" title="发表于 2024-12-05 23:13:48">2024-12-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/03/Lua/" title="Lua">Lua</a><time datetime="2024-12-03T07:48:49.000Z" title="发表于 2024-12-03 15:48:49">2024-12-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/28/%E4%BA%8C%E5%88%B7Redis%E5%91%BD%E4%BB%A4/" title="二刷Redis命令">二刷Redis命令</a><time datetime="2024-11-27T16:03:53.000Z" title="发表于 2024-11-28 00:03:53">2024-11-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/14/pinnacle-sql%E4%BC%98%E5%8C%96/" title="pinnacle-sql优化">pinnacle-sql优化</a><time datetime="2024-11-14T02:11:49.000Z" title="发表于 2024-11-14 10:11:49">2024-11-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://echin-h.oss-cn-hangzhou.aliyuncs.com/img/%E9%BB%91%E8%89%B2.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By Echin-h</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">today is a beautiful day</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div></div></body></html>